### stateful(스테이트풀) 과 stateless(스테이트리스)

#### 무상태 프로토콜(stateless protocol)
HTTP의 특징 중 하나가 비연결성이기 때문에 이로 인해 서버는 클라이언트를 식별할 수 없다. 즉 HTTP 통신의 원칙은 stateless이다. 이전 요청과도 무관한 각각의 요청을 독립적인 트랜잭션으로 취급하는 통신 프로토콜이다. 이로인해 서버는 요청이 들어올 때마다 매번 새로운 인증을 해야하는 번거러움이 발생한다. 

#### 상태 프로토콜(stateful)
이로인해 HTTP 통신을 stateful을 가능하게 만들어 번거로움을 해결해 줄 수 있다. 상태정보를 어디에 저장하는지에 따라 2개로 나뉘는데  __쿠키__ 와 __세션__ 이 있다.    

#### 쿠키
브라우저에 의해 클라이언트측에 저장되어 서버는 클라이언트가 무엇을 요청했는지 기억하지 못하지만 클라이언트가 저장되어 있는 데이터를 불러와 서버에 요청한다.     
__ex) 쇼핑몰 사이트에 로그인 하지 않고 장바구니에 상품을 등록해놓은 후 나갔다가 다시 들어와도 상품이 여전히 등록될 수 있게 하는 역할을 해준다__

쿠키는 통신될때 HTTP헤더에 저장되는 텍스트 파일이다.   
```
1. 처음 클라이언트가 서버에 요청을 할때 서버의 쿠키를 가지고 있지 않다
2. 서버에서 request의 헤더에 쿠키가 포함되어 있는지 확인 후 통신의 상태(id,pwd등)을 저장한 쿠키를 response한다. 
3. 클라이언트의 브라우저가 받은 쿠키를 보존한다
4. 다음 클라이언트가 서버에 요청할때 HTTP헤더에 쿠키를 함께 실어 서버에 request한다.
5. 서버는 받은 쿠키로 클라이언트를 판별한다
```
__(이때 쿠키는 최대 400개의 쿠키를 저장할 수 있고 몇몇개의 제약 조건이 존재한다)__    

__쿠키의 단점__   
쿠키는 사용자의 데이터가 컴퓨터에 저장되기 때문에 보안적인 문제가 발생한다  

#### 세션 

서버측에 저장되어 클라이언트가 무엇을 요청하는지 저장되어 있어 요청에 대한 응답을 실행한다. 세션은 이용한 다수의 HTTP통신을 하나의 묶음으로 세션관리라고 말하며 세션관리에는 __세션ID__ , __세션__ 이 하나의 짝으로 취급된다. 이때 세션ID가 클라이언트에 보내지고(주로 쿠키를 이용해 전달) 세션ID가 관련된 서버의 세션과 관련을 짓기때문에 쿠키만을 이용한 방식보다는 보안적인 측면에서는 좋다.    

__세션의 단점__   
다수의 서버를 이용하는 경우 로그인한 시점에서 사용이 끝날때까지 한가지의 서버만을 이용하게 하던지 서버에 저장되는 세션 정보를 전부 다 동기화 해야 한다.    

#### 캐시  
캐시는 웹페이지 리소스 파일들의 임시 저장소로 같은 웹페이지를 접속할때 페이지 로딩 속도를 개선해주는 역할을 한다. 
ex) 종종 변경되어야 하는 데이터가 업데이트 되지 않을때가 있다면 캐시가 이유일 수 있다. (캐시는 서버의 캐시클라우드라는 저장공간에 사용자의 의지와 상관없이 자동 저장되기 때문이다) 웹개발시 css가 업데이트 되지 않는 원인 중 하나가 된다.    

- - -
Q1. 다수의 서버를 이용한다는 것은 무엇을 의미하는가 

Q2. 쿠키 헤더에 존재하는 도메인과 경로는 무엇을 말하는가
A2. HTTP 프로토콜의 쿠키헤더에는 ```Set-Cookie: name=value [; expires=date] [; path=path] [; domain=domain] [; secure]```리소스들이 존재한다    
- expires : 쿠키의 만료일 문자열이다. 쿠키의 유효한 날자가 날짜 형식으로 써져있다.    

- domain : 쿠키가 적용되야하는 호스트를 지정한다. 지정하지 않으면 현재 URI를 기준으로 적용된다     

```
호스트란 ?
네트워크에 연결되어 있는 컴퓨터들

호스트 설정이란 ?
도메인을 호스트의 ip에 연결하는 행위이다
```

- path : 쿠키 헤더를 서버에서 보내기 전에 요청된 리소스에 있어야하는 url경로를 나타낸다. 즉 path에 지정된 값과 일치하는 url요청에 대해 쿠키를 전송하도록 만드는 옵션이다    

- secure : 보안 쿠키를 적용하는 옵션으로 서버에서 요청은 ssl을 사용하며 https를 상용할때만 전송할 수 있다