## SSH(secure shell)통신이란
두 컴퓨터간 안전한 통신을 하게 해주는 보안 프로토콜이다. 개발자가 서버를 관리하면서 원격으로 접속하여 관리할때 사용된다.telnet방식은 데이터를 암호화되지 않은채 그대로 전송되기 때문에 보안상 취약하다. 이를 보완하기 위해 key를 이용한 ssh통신 방식이 나왔다.

<br>

## SSH통신을 이용한 AWS
서버를 구축해주는 클라우드 서비스에서 제공하는 서버는 기본적으로 원격 접속을 해서 접근하고 사용하는데 AWS로 서버를 생성할때 필수적으로 SSH 보안과정을 거치게 된다. 이는 서버 원격으로 클라이언트가 접속할때 외부의 보안 위협으로부터 보호해주는 역할을 해준다.

<br>

## SSL 와 SSH의 차이점은 ?
SSL은 웹브라우저와 서버간의 정보를 암호화해주는 방식이다.예를 들면 인터넷상에서 결제를 하거나 인터넷뱅킹과 같은 일을 할때 사용된다 (웹 사이트와 사용자간에 주고받는 데이터를 암호화한다)

SSH는 원격지의 컴퓨터, 즉 멀리 떨어져 있는 서버에 안전하게 접근하게 암호화해주는 역할을 한다. (인터넷을 통해 원격으로 서버를 제어 할 수 있게 해주는 프로토콜) 

SSH - 서버에 대한 연결을 보호하기 위한 프로토콜
SSL - 웹 사이트 보안을 위한 프로토콜
<br>


## SSH의 작동원리

가장 대중적으로 쓰이는 방식은 key를 이용하는 방식이다. 클라이언트(사용자)와 서버(호스트)는 각각 키를 보유하고 있으며, 해당 키를 이용해 상대를 인증하고 안전하게 데이터를 주고받게 된다. 이때 키를 생성하는 방식이 두가지 존재한다

> 비대칭키 방식    
사용자와 서버가 서로의 정체를 증명하기 위해 사용하는 방식이다. 서버와 사용자 각각 한쌍의 키를 생성한다(.pub, .pem)    

- 서버인증 : 클라이언트가 서버에 처음 접속을 시도하면 서버의 공개키를 받을지 묻는 메시지가 나온다. 사용자가 yes를 선택하면 공개키를 받아서 클라이언트에 있는 정해진 파일에 저장한다. 클라이언트는 난수값을 발생시키고 난수값에 대한 해시값(암호화기법으로 고정된 길이의 암호화된 문자열로 변환)을 생성해 저장하게 된다. 그리고 난수값을 공개키로 암호화하여 서버에 전송한다. 서버에서는 암호화된 데이터를 비밀키로 복호화한 후 난수값을 알아낸다. 복호화된 난수값을 통해 해시값을 다시 만든후 클라이언트에 다시 전송한다. 클라이언트에서는 저장하고 있는 해시값과 서버로부터 받은 해시값을 비교해 서버가 정상적인 서버인지 확인하게 된다.    

<br>

- 사용자 인증 : 사용자 인증은 클라이언트에서 비대칭키를 생성하여 서버에 있는 파일에 공개키를 사전에 복사한다. 서버는 난수값을 생성 한 뒤 해시값을 만들어 저장한다. 서버에서 난수값을 클라이언트의 공개키로 암호화하여 클라이언트에 전송하게 되고 클라이언트에서 암호화된 난수값을 비밀키로 복호화하여 해시값을 생성해 다시 서버에 보낸다. 서버에 저장하고 있던 해시값과 클라이언트로부터 받은 해시값을 비교해 정상적인 사용자인지를 확인하게 된다. 

<br>
- 데이터 암호화 : 서버인증과 사용자 인증이 끝나면 비대칭키를 통해 클라이언트와 서버는 대칭키를 서로 교환한다. 그 후 통신 되는 모든 데이터는 세션키를 통해서 암호화가 이루어지는데 통신이 종료되면 세션키도 폐기되어 사용할 수 없다. 즉 통신을 할때마다 대칭키가 새롭게 생성된다

