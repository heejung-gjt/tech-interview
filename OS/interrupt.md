## 인터럽트란
개념
내부 동작
종류

- 인터럽트란 프로그램을 실행하는 도중에 예기치 않은 상황이 발생할 경우 실행 중인 작업을 중단하고 상황을 처리한 후 실행 중이던 작업으로 복귀하여 마저 처리하는것, 지금보다 중요한 일이 발생하면 그 일을 먼저 처리하는 것이다.

- 인터럽트란 컴퓨터에 설정된 장치에서 프로세서로 보내는 하드웨어 신호로, 현재 실행 중인 프로그램 수행을 미루고 다른 프로그램의 수행을 요구하는 명령어이다 

<br>

- 외부 인터럽트
  - cpu의 하드웨어 신호에 의해 발생
  - 입출력 장치,전원등 외부적 요인에 발생
  - 전원 이상, 기계 착오, 외부신호에 의해 발생

- 내부 인터럽트
  - cpu의 하드웨어 신호에 의해 발생
  - trap이라 부르며, 잘못된 명령이나 데이터를 사용할때 발생
  - 0으로 나누기, 오버플로우..

- SW 인터럽트
  - 명령어의 수행에 의해 발생
  - 사용자가 프로그램을 실행시킬때 발생

<br>

### 인터럽트 발생 처리 과정
- 프로그램 실행 중에 인터럽트가 발생
- 수행 중인 프로그램 중지 후, 인터럽트 원인을 파악
- 상태 레지스터와 pc등을 스택에 저장
- 인터럽트 서비스 루틴으로 분기, 처리 루틴을 수행하고 중지시킨 프로그램을 이어서 실행

![인터럽트](https://user-images.githubusercontent.com/64240637/120915370-3342fe80-c6de-11eb-86a8-508e5ec3fa4f.png)

- a에서 프로그램 A가 실행되고 있다. 이때 프로그램 카운터는 현재 명령어를 가리키고 있다    

- b에서 프로세서에 인터럽트 신호가 도달하면 현재 명령어가 종료되고 모든 레지스터의 내용은 스택 또는 pcb영역으로 보내진다. 프로그램 카운터는 요청이 들어온 프로그램B를 저장하고 B를 실행한다   

- c에서 인터럽트를 종료하게 되면 스택 또는 PCB 영역에 있던 내용을 레지스터에 다시 저장하고 중단했던 프로그램A를 실행한다   

<br>

## 인터럽트의 이점

키보드 입력과 같은 이벤트가 발생했을때 이와 같은 이벤트가 발생했는지에 대한 점검하는 과정이 필요해진다. 계속해서 이러한 과정이 발생한다면 프로세서가 다른 연산을 수행할 수 없게되기 때문에 오버헤드가 증가하여 수행시간이 낭비된다. 이러한 인터럽트를 통해 인터럽트 요청이 필요한 상황이 왔을대 프로세서에 신호를 보냄으로써 처리할 수 있게 해준다 

<br>

![예](https://user-images.githubusercontent.com/64240637/120925436-9b600780-c713-11eb-819f-dde645a7ece4.png)

예시를 보면 open이라는 함수로 저장매체에 저장되어 있는 값을 가져오는데 걸리는 시간동안 cpu가 다른 프로그램을 실행시킬수 있도록 해준다

시분할 시스템 : 다중 사용자 지원, 컴퓨터 응답시간을 최소화하는 시스템
멀티태스킹 : 단일 cpu에서 여러 응용 프로그램을 동시에 실행하는 것처럼 보이게 하는 시스템
멀티 프로세싱 : 여러 cpu에서 하나의 응용 프로그램을 병렬로 실행하게 해서, 실행속도를 높이는 기법(병렬시스템)

-------------------------
응용 프로그램은 프로세스가 아니다
응용 프로그램은 여러개의 프로세스로 이루어질 수 있다

-------------------------
스케쥴링 알고리즘
어느 순서대로 프로세스를 실행시킬까??

fifo 스케줄러 : 프로세스가 저장매체를 읽는다든지, 프린팅을 한다든지 하는 작업없이 쭉 cpu를 끝까지 처리하는 작업이다
(= 큐)
가장 간단한 스케줄러(배치 처리 시스템과 유사)
= fcfs(first come first served) 스케줄러라고도 불린다

![fifo](https://user-images.githubusercontent.com/64240637/120926156-b5e7b000-c716-11eb-8f1e-8323c6a0c3f1.png)

최단 작업 우선(sjf)스케줄러
sjf(shortest job first)스케줄러
- 가장 프로세스 실행시간이 짧은 프로세스부터 먼저 실행시키는 알고리즘
fifo 1 1 2 2 2 3 
sjf 3 1 1 2 2 2 - 실행시간이 가장 짧은 시간을 먼저 실행시킨다. 

우선순위 기반 스케줄러 (priority-based)
- 프로세스에 우선순위를 먼저 매긴 후 실행시킨다.
- 정적 우선순위 (프로세스마다 우선순위를 미리 지정)
- 동적 우선순위 (스케줄러가 상황에 따라 우선순위를 동적으로 변경)

RR(라운드로빈스케줄러)
![RR](https://user-images.githubusercontent.com/64240637/120926514-204d2000-c718-11eb-8d2c-d0b5ebedd17f.png)

시분할시스템을 기본으로 동작한다

--------------------------------------
프로세스 상태와 스케줄링
멀티 프로그래밍 : CPU활용도를 극대화하는 스케줄링 알고리즘
WAIT : 간단히 저장매체로부터 파일 읽기를 기다리는 시간으로 가정
![WAIT](https://user-images.githubusercontent.com/64240637/120926605-96ea1d80-c718-11eb-963d-d10ed5535f8d.png)

스케줄러가 프로세스의 상태를 보고 우선순위를 정해준다
![STATE](https://user-images.githubusercontent.com/64240637/120926733-17108300-c719-11eb-9af9-3687dc65f665.png)
-----------------------------------------

선점형과 비선점형 스케줄러

- 선점형 스케줄러
하나의 프로세스가 다른 프로세스 대신에 프로세서를 차지할 수 있다

- 비선점형 스케줄러
하나의 프로세스가 끝나지 않으면 다른 프로세스는 CPU를 사용할 수 없다
프로세스가 자발적으로 BLOCKING 상태로 들어가거나 실행이 끝났을때만 다른 프로세스로 교체가 가능
